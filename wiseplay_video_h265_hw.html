<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Wiseplay H265硬件解密</title>
    <script src="./lib/dash.all.min.js"></script>
    <!-- Bootstrap core CSS -->
    <link href="./lib/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="./lib/main.css" rel="stylesheet">
    <style>
        video {
            width: 640px;
            height: 360px;
        }
    </style>
    <script class="code">
        function init() {
            var protDatas = [                
                {
                    "com.wiseplay.drm": {
                        "serverURL": "http://license.dev.trustdta.com:8080/drmproxy/v3/getLicense?contentId=R1j36c65kUGeWN5&useDrmProxy=1"
                    }
                }
            ];
            var video,
                player,
                url = "https://hwposter-inland.hwcloudtest.cn/rem/ruanjie/h265_2560x1440_4.9m_30fp_cenc/dash.mpd";

            const tracks = [
        '1 DASH MP4 H265 SD&HD',
        '2 DASH MP4 H265-clear',
        '3 cenc-dash-h265-480*270-0.2M-30fps-smooth',
        '4 cenc-dash-h265-640*480-0.5M-30fps-SD',
        '5 cenc-dash-h265-1280*720-1.4M-30fps-HD',
        '6 cenc-dash-h265-1920*1080-4.2M-30fps-FHD',
        '7 cenc-dash-h265-2560*1440-4.9M-30fps-2K',
        '8 cenc-dash-h265-3840*2160-8.4M-30fps-4K',
        '9 cens-dash-h265-480*270-0.2M-30fps-smooth',
        '10 cens-dash-h265-640*480-0.5M-30fps-SD',
        '11 cens-dash-h265-1280*720-1.4M-30fps-HD',
        '12 cens-dash-h265-1920*1080-4.2M-30fps-FHD',
        '13 cens-dash-h265-2560*1440-4.9M-30fps-2K',
        '14 cens-dash-h265-3840*2160-8.4M-30fps-4K',
        '15 cbc1-dash-h265-480*270-0.2M-30fps-smooth',
        '16 cbc1-dash-h265-640*480-0.5M-30fps-SD',
        '17 cbc1-dash-h265-1280*720-1.4M-30fps-HD',
        '18 cbc1-dash-h265-1920*1080-4.2M-30fps-FHD',
        '19 cbc1-dash-h265-2560*1440-4.9M-30fps-2K',
        '20 cbc1-dash-h265-3840*2160-8.4M-30fps-4K',
        '21 cbcs-dash-h265-480*270-0.2M-30fps-smooth',
        '22 cbcs-dash-h265-640*480-0.5M-30fps-SD',
        '23 cbcs-dash-h265-1280*720-1.4M-30fps-HD',
        '24 cbcs-dash-h265-1920*1080-4.2M-30fps-FHD',
        '25 cbcs-dash-h265-2560*1440-4.9M-30fps-2K',
        '26 cbcs-dash-h265-3840*2160-8.4M-30fps-4K',
        '27 sm4c-dash-h265-1920*1080-4.2M-30fps-1080p',
        '28 sm4s-dash-h265-1920*1080-4.2M-30fps-1080p',
            ];

            const titles = [
                '1 DASH MP4 H264 SD&HD',
                '2 DASH MP4 H264-clear',
                '3 cenc-dash-h264-480*270-0.2M-30fps-smooth',
                '4 cenc-dash-h264-640*480-0.5M-30fps-SD',
                '5 cenc-dash-h264-1280*720-1.4M-30fps-HD',
                '6 cenc-dash-h264-1920*1080-4.2M-30fps-FHD',
                '7 cenc-dash-h264-2560*1440-4.9M-30fps-2K',
                '8 cenc-dash-h264-3840*2160-8.4M-30fps-4K',
                '9 cbcs-dash-h264-480*270-0.2M-30fps-smooth'
            ]
            let currentTrackIndex = 0;

            player = dashjs.MediaPlayer().create();
            player.initialize(video, tracks[currentTrackIndex], true);
            player.setProtectionData(protDatas[currentTrackIndex]);            
            var div = document.getElementById('http-warning');
            div.innerHTML = tracks[currentTrackIndex];
            div.style.display = ''
            prevButton.addEventListener('click', function () {
                if (currentTrackIndex > 0) {
                    currentTrackIndex--;
                    player.attachSource(tracks[currentTrackIndex]);
                    player.setProtectionData(protDatas[currentTrackIndex]);
                    div.innerHTML = titles[currentTrackIndex];
                    div.style.display = ''
                }
            });

            nextButton.addEventListener('click', function () {
                if (currentTrackIndex < tracks.length - 1) {
                    currentTrackIndex++;
                    player.attachSource(tracks[currentTrackIndex]);
                    player.setProtectionData(protDatas[currentTrackIndex]);
                    div.innerHTML = titles[currentTrackIndex];
                    div.style.display = ''
                }
            });     
        }
    </script>
</head>
<body>

<main>
    <div class="container py-4">
        <h4>Wiseplay H265硬件解密</h4>
        <div class="row">
            <div class="col-md-8">
                <video controls="true"></video>
            </div>
            <div>
                <div>
                    <button id="prevButton">上一曲</button>
                    <button id="nextButton">下一曲</button>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="alert alert-danger" role="alert" style="display: none" id="http-warning">
                        </div>
                    </div>
                </div>
                <div>1 DASH MP4 H265 SD&HD</div>
                <div>2 DASH MP4 H265-clear</div>
                <div>3 cenc-dash-h265-480*270-0.2M-30fps-smooth</div>
                <div>4 cenc-dash-h265-640*480-0.5M-30fps-SD</div>
                <div>5 cenc-dash-h265-1280*720-1.4M-30fps-HD</div>
                <div>6 cenc-dash-h265-1920*1080-4.2M-30fps-FHD</div>
                <div>7 cenc-dash-h265-2560*1440-4.9M-30fps-2K</div>
                <div>8 cenc-dash-h265-3840*2160-8.4M-30fps-4K</div>
                <div>9 cens-dash-h265-480*270-0.2M-30fps-smooth</div>
                <div>10 cens-dash-h265-640*480-0.5M-30fps-SD</div>
                <div>11 cens-dash-h265-1280*720-1.4M-30fps-HD</div>
                <div>12 cens-dash-h265-1920*1080-4.2M-30fps-FHD</div>
                <div>13 cens-dash-h265-2560*1440-4.9M-30fps-2K</div>
                <div>14 cens-dash-h265-3840*2160-8.4M-30fps-4K</div>
                <div>15 cbc1-dash-h265-480*270-0.2M-30fps-smooth</div>
                <div>16 cbc1-dash-h265-640*480-0.5M-30fps-SD</div>
                <div>17 cbc1-dash-h265-1280*720-1.4M-30fps-HD</div>
                <div>18 cbc1-dash-h265-1920*1080-4.2M-30fps-FHD</div>
                <div>19 cbc1-dash-h265-2560*1440-4.9M-30fps-2K</div>
                <div>20 cbc1-dash-h265-3840*2160-8.4M-30fps-4K</div>
                <div>21 cbcs-dash-h265-480*270-0.2M-30fps-smooth</div>
                <div>22 cbcs-dash-h265-640*480-0.5M-30fps-SD</div>
                <div>23 cbcs-dash-h265-1280*720-1.4M-30fps-HD</div>
                <div>24 cbcs-dash-h265-1920*1080-4.2M-30fps-FHD</div>
                <div>25 cbcs-dash-h265-2560*1440-4.9M-30fps-2K</div>
                <div>26 cbcs-dash-h265-3840*2160-8.4M-30fps-4K</div>
                <div>27 sm4c-dash-h265-1920*1080-4.2M-30fps-1080p</div>
                <div>28 sm4s-dash-h265-1920*1080-4.2M-30fps-1080p</div>
            </div>
        </div>
        <footer class="pt-3 mt-4 text-muted border-top">
            &copy; DASH-IF
        </footer>
    </div>
</main>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        init();
    });
</script>
</body>
</html>
